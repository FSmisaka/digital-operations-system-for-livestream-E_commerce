{% extends 'base.html' %}

{% block title %}消息中心{% endblock %}

{% block content %}
<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center">
    <h2 class="mb-0 title-with-icon">
      <i class="bi bi-chat-dots"></i> 消息中心
    </h2>
  </div>

  <!-- 列表内容 -->
  <div class="list-group mt-4">
    {% for chat in chat_list %}
    <a href="{{ url_for('forum.chat', receiver_id=chat.receiver_id) }}" class="list-group-item list-group-item-action d-flex align-items-center">
      <div class="bubble-icon me-3">
        <i class="bi bi-chat-dots"></i> 
      </div>
      
      <!-- 消息内容 -->
      <div class="d-flex flex-column flex-grow-1">
        <div class="d-flex justify-content-between">
          <strong>{{ chat.receiver_name }}</strong>
          <small class="text-muted text-end">{{ chat.timestamp }}</small>
        </div>
        <p class="mb-1">{{ chat.last_message }}</p>
      </div>
    </a>
    {% endfor %}
  </div>
</div>
{% endblock %}

{% block head %}
<style>
  /* 大标题样式 */
  .title-with-icon {
    font-size: 2rem;
    font-weight: bold;
    color: #007bff; /* 可以修改颜色 */
  }

  .title-with-icon i {
    font-size: 1.5rem;
    margin-right: 10px;
  }

  /* 气泡样式 */
  .bubble-icon {
    width: 30px;
    height: 30px;
    background-color: #007bff; /* 设置气泡背景颜色 */
    border-radius: 50%; /* 使其成为圆形 */
    display: flex;
    justify-content: center;
    align-items: center;
    color: white; /* 气泡图标的颜色 */
    font-size: 16px; /* 图标大小 */
  }

  /* 使消息和气泡对齐 */
  .list-group-item {
    display: flex;
    align-items: center;
    padding: 10px;
  }

  .d-flex {
    display: flex;
  }

  .me-3 {
    margin-right: 1rem;
  }

  /* 时间戳的样式 */
  .text-end {
    text-align: right;
    font-size: 0.9rem;
    color: #6c757d;
  }

  /* 样式优化 */
  .list-group-item:hover {
    background-color: #f8f9fa;
    cursor: pointer;
  }

  /* 确保消息内容占满剩余空间 */
  .flex-grow-1 {
    flex-grow: 1;
  }
</style>
{% endblock %}
